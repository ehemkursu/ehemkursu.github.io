<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Edremit HEM - Tur 2: Montaj</title>
    <style>
        :root { --bg: #0f172a; --card-bg: #ffffff; --primary: #1e3a8a; --accent: #fbbf24; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: white; display: flex; flex-direction: column; align-items: center; padding: 20px; min-height: 100vh; margin: 0; }
        
        #msg-box { font-size: 1.8rem; font-weight: bold; color: var(--accent); margin-bottom: 20px; text-align: center; }
        .grid-container { display: grid; grid-template-columns: repeat(5, 1fr); gap: 15px; width: 100%; max-width: 1100px; border: 3px dashed #475569; padding: 25px; border-radius: 20px; background: rgba(255,255,255,0.05); min-height: 250px; margin-bottom: 20px; }

        .drag-item { 
            background: var(--card-bg); color: #333; padding: 15px; border-radius: 12px; cursor: grab; 
            display: flex; flex-direction: column; align-items: center; transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative; z-index: 1;
        }
        /* Zoom Efekti */
        .drag-item.zoomed { transform: scale(1.5); z-index: 100; box-shadow: 0 25px 50px rgba(0,0,0,0.6); }
        .drag-item img { width: 110px; height: 110px; object-fit: contain; pointer-events: none; }
        
        .success-mode { background: #d1fae5 !important; border: 3px solid #16a34a !important; color: #065f46 !important; }
        
        /* 3. Tura Geçiş Oku */
        #next-arrow { 
            display: none; font-size: 6rem; color: var(--accent); 
            text-decoration: none; margin-top: 20px; 
            animation: blink 1s infinite; font-weight: bold;
        }
        @keyframes blink { 0%, 100% { opacity: 0.3; transform: scale(1); } 50% { opacity: 1; transform: scale(1.1); } }
    </style>
</head>
<body>

<div id="msg-box">Donanımları Doğru Sırayla Aşağıya Monte Et!</div>

<div class="grid-container" id="source-grid"></div>
<div class="grid-container" id="target-grid" ondragover="event.preventDefault()" ondrop="handleDrop(event)"></div>

<a href="don3.html" id="next-arrow">➜</a>

<div style="margin-top:auto; padding: 20px; color: #64748b; font-weight: bold;">
    Edremit Halk Eğitimi Merkezi - Bilgisayar İşletmenliği Kursu
</div>

<script>
    // 1. Turdan gelen veriyi al
    const saved = localStorage.getItem('selectedHardware');
    if(!saved) { 
        alert("Lütfen önce 1. turu tamamlayın!");
        window.location.href = "don.html"; 
    }

    const selected = JSON.parse(saved);
    // Doğru montaj sırası (Boşluklar temizlenmiş haliyle)
    const order = ["anakart", "işlemci", "ram", "harddisk", "ekran kartı", "kasa", "ekran", "klavye", "mouse", "kulaklık"]; 
    let step = 0;

    const source = document.getElementById('source-grid');
    
    // Parçaları karıştırarak ekle
    [...selected].sort(() => Math.random() - 0.5).forEach(item => {
        const div = document.createElement('div');
        div.className = 'drag-item';
        div.draggable = true;
        div.id = item;
        // Resim dosyası eşleştirmesi
        div.innerHTML = `<img src="picture/${item.replace(' ', '')}.jpg"><span>${item.toUpperCase()}</span>`;
        
        // Tıklayınca Büyütme/Küçültme (Zoom)
        div.onclick = () => {
            const isZ = div.classList.contains('zoomed');
            document.querySelectorAll('.drag-item').forEach(d => d.classList.remove('zoomed'));
            if(!isZ) div.classList.add('zoomed');
        };

        div.ondragstart = (e) => {
            e.dataTransfer.setData("text", div.id);
            div.classList.remove('zoomed');
        };
        source.appendChild(div);
    });

    function handleDrop(e) {
        e.preventDefault();
        const id = e.dataTransfer.getData("text");
        
        if (id === order[step]) {
            const el = document.getElementById(id);
            document.getElementById('target-grid').appendChild(el);
            el.draggable = false;
            el.classList.add('success-mode');
            el.classList.remove('zoomed');
            step++;
            
            if (step === 10) {
                document.getElementById('msg-box').innerText = "TEBRİKLER! MONTAJ TAMAMLANDI.";
                document.getElementById('msg-box').style.color = "#10b981";
                document.getElementById('next-arrow').style.display = "block";
            }
        } else {
            alert("Hatalı Sıra! Önce " + order[step].toUpperCase() + " monte edilmelidir.");
        }
    }
</script>
</body>
</html>